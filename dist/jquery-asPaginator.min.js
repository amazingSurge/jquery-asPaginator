/*! jQuery asPaginator - v0.1.2 - 2014-09-07
* https://github.com/amazingSurge/jquery-asPaginator
* Copyright (c) 2014 amazingSurge; Licensed GPL */
!function(a){"use strict";var b=function(c,d,e){this.element=c,this.$element=a(c).empty(),this.options=a.extend({},b.defaults,e),this.namespace=this.options.namespace,this.currentPage=this.options.currentPage||1,this.itemsPerPage=this.options.itemsPerPage,this.totalItems=d,this.totalPages=this.getTotalPages(),this.isOutOfBounds()&&(this.currentPage=this.totalPages),this.initialized=!1,this.components=a.extend(!0,{},this.components),this.$element.addClass(this.namespace),this.options.skin&&this.$element.addClass(this.namespace+"_"+this.options.skin),this._trigger("init"),this.init()};b.prototype={constructor:b,components:{},init:function(){var b=this,c='<li class="'+b.namespace+'-prev"><a></a></li>',d='<li class="'+b.namespace+'-next"><a></a></li>';b.$wrap=a('<ul class="'+b.namespace+'-basic"></ul>'),b.$prev=a(c).find("a").html(b.options.prevText).end().appendTo(b.$wrap),b.$next=a(d).find("a").html(b.options.nextText).end().appendTo(b.$wrap),b.$prev.on("click.asPaginator",a.proxy(b.prev,b)),b.$next.on("click.asPaginator",a.proxy(b.next,b)),b.$wrap.appendTo(b.$element),a.each(this.options.components,function(a,c){return null===c||c===!1?!1:void b.components[a].init.call(b.components[a],b)}),b.goTo(b.currentPage),b.initialized=!0,this._trigger("ready")},calculate:function(a,b,c){var d=1,e=1;return c+2>=a&&(d=0),a+c+2>=b&&(e=0),{left:d,right:e}},_trigger:function(a){var b=Array.prototype.slice.call(arguments,1),c=[this].concat(b);this.$element.trigger("asPaginator::"+a,c),a=a.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)});var d="on"+a;"function"==typeof this.options[d]&&this.options[d].apply(this,b)},goTo:function(a){return a=Math.max(1,Math.min(a,this.totalPages)),a===this.currentPage&&this.initialized===!0?!1:(this.$next.add(this.$prev).removeClass(this.namespace+"_disable"),a===this.totalPages&&this.$next.addClass(this.namespace+"_disable"),1===a&&this.$prev.addClass(this.namespace+"_disable"),this.currentPage=a,void(this.initialized&&this._trigger("change",a)))},prev:function(){return this.hasPreviousPage()?(this.goTo(this.getPreviousPage()),!0):!1},next:function(){return this.hasNextPage()?(this.goTo(this.getNextPage()),!0):!1},goFirst:function(){return this.goTo(1)},goLast:function(){return this.goTo(this.totalPages)},update:function(a,b){var c={};"string"==typeof a?c[a]=b:c=a;for(var d in c)switch(d){case"totalItems":this.totalItems=c[d];break;case"itemsPerPage":this.itemsPerPage=c[d];break;case"currentPage":this.currentPage=c[d]}this.totalPages=this.totalPages()},isOutOfBounds:function(){return this.currentPage>this.totalPages},getItemsPerPage:function(){return this.itemsPerPage},getTotalItems:function(){return this.totalItems},getTotalPages:function(){return this.totalPages=Math.ceil(this.totalItems/this.itemsPerPage),this.lastPage=this.totalPages,this.totalPages},getCurrentPage:function(){return this.currentPage},hasPreviousPage:function(){return this.currentPage>1},getPreviousPage:function(){return this.hasPreviousPage()?this.currentPage-1:!1},hasNextPage:function(){return this.currentPage<this.totalPages},getNextPage:function(){return this.hasNextPage()?this.currentPage+1:!1}},b.defaults={namespace:"asPaginator",prevText:"prev",nextText:"next",currentPage:1,itemsPerPage:10,adjacentNum:3,skin:null,components:{lists:!0},onInit:null,onReady:null,onChange:null},b.registerComponent=function(a,c){b.prototype.components[a]=c},b.registerComponent("lists",{defaults:{fix:!1,displayPages:5,tpl:'<li><a href="#"></a></li>'},init:function(b){var c=a.extend({},this.defaults,b.options.components.lists),d=this;this.opts=c,c.fix===!1?(b.$wrap.delegate("li","click",function(c){var d=a(c.target).parent().data("value");return void 0===d?!1:"omit"===d?!1:""===d?!1:void b.goTo(d)}),d.render(b),b.$element.on("asPaginator::change",function(){d.render(b)})):(b.$wrap.delegate("li","click",function(c){var d=a(c.target).parent().data("value");return void 0===d?!1:""===d?!1:(b.goTo(d),!1)}),d.fixRender(b),b.$element.on("asPaginator::change",function(){d.fixRender(b)}))},render:function(b){var c,d=b.currentPage,e=b.totalPages,f=b.options.adjacentNum,g=b.calculate(d,e,f),h="";if(0===g.left){for(c=1;d-1>=c;c++)h+='<li data-value="'+c+'"><a href="#">'+c+"</a></li>";h+='<li class="'+b.namespace+'_active" data-value="'+d+'"><a href="#">'+d+"</a></li>"}else{for(c=1;2>=c;c++)h+='<li data-value="'+c+'"><a href="#">'+c+"</a></li>";for(h+='<li class="'+b.namespace+'_omit" data-value="omit"><a href="#">...</a></li>',c=d-f;d-1>=c;c++)h+='<li data-value="'+c+'"><a href="#">'+c+"</a></li>";h+='<li class="'+b.namespace+'_active" data-value="'+d+'"><a href="#">'+d+"</a></li>"}if(0===g.right)for(c=d+1;e>=c;c++)h+='<li data-value="'+c+'"><a href="#">'+c+"</a></li>";else{for(c=d+1;d+f>=c;c++)h+='<li data-value="'+c+'"><a href="#">'+c+"</a></li>";for(h+='<li class="'+b.namespace+'_omit" data-value="omit"><a href="#">...</a></li>',c=e-1;e>=c;c++)h+='<li data-value="'+c+'"><a href="#">'+c+"</a></li>"}b.$wrap.find("li").not("."+b.namespace+"-prev").not("."+b.namespace+"-next").remove(),b.$prev.after(a(h))},fixRender:function(b){var c,d=b.currentPage,e=this.opts.displayPages-1,f="",g=b.$wrap.find("li").removeClass(b.namespace+"_active");if(a.each(g,function(e,f){return a(f).data("value")===d?(a(f).addClass(b.namespace+"_active"),c=!1,!1):void 0}),c!==!1){f+='<li class="'+b.namespace+'_active" data-value="'+d+'"><a href="#">'+d+"</a></li>";for(var h=d+1,i=h+e-1>b.totalPages?b.totalPages:h+e-1;i>=h;h++)f+='<li data-value="'+h+'"><a href="#">'+h+"</a></li>";b.$wrap.find("li").not("."+b.namespace+"-prev").not("."+b.namespace+"-next").remove(),b.$prev.after(a(f))}}}),b.registerComponent("goTo",{defaults:{text:"Go"},init:function(b){var c=a.extend({},this.defaults,b.options.components.goTo),d=a('<div class="'+b.namespace+'-goto"><input type="text" /><span></span></div>'),e=d.find("input"),f=d.find("span").text(c.text);b.$element.append(d),f.on("click",function(){var a=parseInt(e.val(),10);b.goTo(a)})}}),b.registerComponent("info",{init:function(b){{var c=(a.extend({},this.defaults,b.options.components.info),a('<div class="'+b.namespace+'-info"><span class="'+b.namespace+'-current"></span>/<span class="'+b.namespace+'-total"></span></div>')),d=c.find("."+b.namespace+"_current");c.find("."+b.namespace+"-total").text(b.totalPages)}d.text(b.currentPage),b.$element.append(c).on("asPaginator::change",function(){d.text(b.currentPage)})}}),a.fn.asPaginator=function(c,d){if("string"==typeof d){var e=d,f=Array.prototype.slice.call(arguments,1);return this.each(function(){var b=a.data(this,"asPaginator");"function"==typeof b[e]&&b[e].apply(b,f)})}return"undefined"==typeof c?this:this.each(function(){a.data(this,"asPaginator")||a.data(this,"asPaginator",new b(this,c,d))})}}(jQuery);